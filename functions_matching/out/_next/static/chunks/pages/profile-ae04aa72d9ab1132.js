(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{6896:function(e,r,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return l(9756)}])},221:function(e,r,l){"use strict";l.d(r,{Z:function(){return u}});var s=l(5893),t=l(8604),n=l(6718),i=l(8464);let o=()=>{let e=new n.hJ;return(0,n.rh)(i.I8,e)},a=()=>(0,n.w7)(i.I8);var c=l(1664),d=l.n(c),x=l(7294),u=()=>{let[e,r]=(0,x.useState)(!1),{user:l}=(0,t.a)(),[n,i]=(0,x.useState)(!1),c=()=>{i(!0),o().catch(e=>{console.error(null==e?void 0:e.code)}).finally(()=>{i(!1)})};return(0,s.jsxs)("div",{className:"apply-font",children:[(0,s.jsx)("div",{className:"page-background"}),(0,s.jsxs)("nav",{className:"px-5 py-0text-[#F0E3E3]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(d(),{href:"/",scroll:!1,children:(0,s.jsx)("b",{className:"font-semibold text-6xl cursor-pointer",children:"Socrates"})}),(0,s.jsx)("button",{onClick:()=>r(!e),className:"text-3xl md:hidden focus:outline-none",children:"☰"}),(0,s.jsxs)("div",{className:"hidden md:flex text-4xl",children:[(0,s.jsx)(d(),{href:"/",scroll:!1,children:(0,s.jsx)("b",{className:"mr-4 cursor-pointer",children:"Home"})}),l&&(0,s.jsx)(d(),{href:"/create",scroll:!1,children:(0,s.jsx)("b",{className:"mr-4 cursor-pointer",children:"Create"})}),l&&(0,s.jsx)(d(),{href:"/room",scroll:!1,children:(0,s.jsx)("b",{className:"mr-4 cursor-pointer",children:"Room"})}),l&&(0,s.jsx)(d(),{href:"/ranking",scroll:!1,children:(0,s.jsx)("b",{className:"mr-4 cursor-pointer",children:"Ranking"})}),l&&(0,s.jsx)(d(),{href:"/profile",scroll:!1,children:(0,s.jsx)("b",{className:"mr-4 cursor-pointer",children:"Profile"})}),(0,s.jsx)("div",{onClick:()=>r(!1),className:"cursor-pointer pl-4",children:null===l&&!n&&(0,s.jsx)("button",{onClick:c,children:(0,s.jsx)("b",{children:"Login"})})}),(0,s.jsx)("div",{onClick:()=>r(!1),className:"cursor-pointer ",children:l&&(0,s.jsx)("button",{onClick:a,children:(0,s.jsx)("b",{children:"Logout"})})})]})]}),(0,s.jsxs)("div",{className:"fixed inset-0 z-20 p-10 text-lg md:hidden ".concat(e?"opacity-100":"opacity-0 pointer-events-none"," transition-opacity duration-500 ease-in-out transform ").concat(e?"translate-y-0":"translate3d(0, -10px, 0)"),style:{backgroundColor:"rgba(25, 24, 37, 0.95)",willChange:"opacity, transform"},children:[(0,s.jsx)("button",{onClick:()=>r(!1),className:"absolute top-5 right-5 text-8xl cursor-pointer focus:outline-none transition-transform duration-300 ease-out",style:{transform:e?"rotate(0)":"rotate(90deg)",willChange:"transform"},children:"\xd7"}),(0,s.jsxs)("ul",{className:"space-y-8 ".concat(e?"translate-y-0":"-translate-y-10"," transition-transform duration-500 ease-in-out"),children:[(0,s.jsx)("li",{children:(0,s.jsx)(d(),{href:"/",scroll:!1,children:(0,s.jsx)("b",{onClick:()=>r(!1),className:"cursor-pointer text-7xl",children:"Home"})})}),l&&(0,s.jsx)("li",{children:(0,s.jsx)(d(),{href:"/create",scroll:!1,children:(0,s.jsx)("b",{onClick:()=>r(!1),className:"cursor-pointer text-7xl",children:"Create"})})}),l&&(0,s.jsx)("li",{children:(0,s.jsx)(d(),{href:"/room",scroll:!1,children:(0,s.jsx)("b",{onClick:()=>r(!1),className:"cursor-pointer text-7xl",children:"Room"})})}),l&&(0,s.jsx)("li",{children:(0,s.jsx)(d(),{href:"/ranking",scroll:!1,children:(0,s.jsx)("b",{onClick:()=>r(!1),className:"cursor-pointer text-7xl",children:"Ranking"})})}),l&&(0,s.jsx)("li",{children:(0,s.jsx)(d(),{href:"/profile",scroll:!1,children:(0,s.jsx)("b",{onClick:()=>r(!1),className:"cursor-pointer text-7xl",children:"Profile"})})}),(0,s.jsx)("li",{children:(0,s.jsx)("div",{onClick:()=>r(!1),className:"cursor-pointer text-7xl",children:null===l&&!n&&(0,s.jsx)("button",{onClick:c,children:(0,s.jsx)("b",{children:"Login"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("div",{onClick:()=>r(!1),className:"cursor-pointer text-7xl",children:l&&(0,s.jsx)("button",{onClick:a,children:(0,s.jsx)("b",{children:"Logout"})})})})]})]})]})]})}},9756:function(e,r,l){"use strict";l.r(r);var s=l(5893),t=l(9828),n=l(6650),i=l(5675),o=l.n(i),a=l(1163),c=l(7294),d=l(221),x=l(8604),u=l(8464);r.default=()=>{let[e,r]=(0,c.useState)(""),[l,i]=(0,c.useState)(null),[h,m]=(0,c.useState)(""),{user:f}=(0,x.a)(),p=(0,a.useRouter)();(0,c.useEffect)(()=>{if(!f){alert("ログインしてください。"),p.push("/");return}let e=null==f?void 0:f.id;if(!e)return;let l=(0,t.JU)(u.db,"users",e);(async()=>{let e=await (0,t.QT)(l);e.exists()?(r(e.data().user_name),m(e.data().img_url||"https://firebasestorage.googleapis.com/v0/b/socrates-413218.appspot.com/o/util%2Fanonymous.png?alt=media&token=b433ffba-46b8-47cb-8699-6c2780814c34")):console.log("No such document!")})()},[f,p]);let j=async()=>{if(!f)return;let r=f.id,s=(0,t.JU)(u.db,"users",r),i="";if(l){let e=(0,n.cF)(),s=(0,n.iH)(e,"users/".concat(r,"/profile.png")),t=(0,n.B0)(s,l);await t,i=await (0,n.Jt)(s)}i?await (0,t.r7)(s,{user_name:e,img_url:i}):await (0,t.r7)(s,{user_name:e}),alert("プロフィールを更新しました。")};return(0,s.jsx)("div",{className:"japanese-font",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl pt-8 px-4 py-0 min-h-screen text-outline",children:[(0,s.jsx)(d.Z,{}),(0,s.jsxs)("div",{className:"profile-container",children:[(0,s.jsx)("div",{className:"rounded-full mx-auto",children:(0,s.jsx)(o(),{src:h,alt:"Profile Image",width:300,height:300})}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)("input",{type:"file",onChange:e=>e.target.files&&i(e.target.files[0]),className:"w-32 h-16  mx-auto  w-full text-white text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"})}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)("input",{type:"text",className:"text-black mx-auto mb-6  p-2 rounded-md border-2 border-gray-300",value:e,onChange:e=>r(e.target.value),placeholder:"username"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"apply-font  text-3xl border border-[#F0E3E3] bg-[#191825] text-[#F0E3E3] font-bold py-2 px-4 rounded transition-colors",onClick:j,children:"Update"})})]})]})})}}},function(e){e.O(0,[664,675,888,774,179],function(){return e(e.s=6896)}),_N_E=e.O()}]);